@model CogsMinimizer.Shared.Subscription
@{
    ViewBag.Title = "Register";
    CogsMinimizer.Shared.Subscription Model = new CogsMinimizer.Shared.Subscription();
}

@section Scripts
{
    <!-- all dependency scripts will be loaded here -->
    @Scripts.Render("~/bundles/jquery")
    <script>
        // In addition to calling controller action buttons click will cause setting cursor to wait while being over body and buttons
        $(document).ready(function () {
            $('.wait-crs').on('click', function () { $('body').css('cursor', 'wait'); $('.btn').css('cursor', 'wait'); })
        });

        function validateInput() {

            var subscriptionName = $("#subscriptionName").val().trim();
            if (subscriptionName.length == 0) {
                alert("Subscription name can't be empty");
                return false;
            }

            var subscriptionId = $("#subscriptionId").val().trim();
            if (subscriptionId.length == 0) {
                alert("Subscription ID can't be empty");
                return false;
            }

            return registerForm.submit();
        }
    </script>
}

<form action="/Subscription/ConnectNoArm" method="post" onsubmit="return validateInput();"  id="registerForm">
    <h1>Register</h1>
    <!-- make 2 text boxes for some subscription data value and user ID. otherwise neither subscription data nor user ID  aren't given to submitting controller method -->
    <table class="table table-striped table-condensed table-hover">
        <tr>
            <td>
                <h4>Subscription name</h4>
            <td>
                <input id="subscriptionName" name="DisplayName" style="width:300px;" type="text" value="" />
            </td>
        </tr>
        <tr>
            <td>
                <h4>Subscription ID</h4>
            </td>
            <td>
                <input id="subscriptionId" name="Id" style="width:300px;" type="text" value="" />            
              </td>  
            </tr>

             <tr>
                <td>
                    <H3>
                        Important - Please assign Reader role to Subminimizer_prod on the subscription.
                        <br />
                        Contact support for more details.
                    </H3>
                </td>
            </tr>
       
        <tr>
        <td>
            <button class="btn btn-success btn-md wait-crs" type="submit">Register</button>
            <small>&nbsp;&nbsp;</small>
        </td>
        </tr>
    </table>
</form>
    
